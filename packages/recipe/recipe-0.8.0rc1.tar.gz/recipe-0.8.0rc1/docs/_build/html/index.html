

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Recipe: A DRY framework for querying data &mdash; Recipe 0.5.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Recipe 0.5.1 documentation" href="#"/>
        <link rel="next" title="Introduction" href="intro.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="#" class="icon icon-home"> Recipe
          

          
          </a>

          
            
            
              <div class="version">
                0.5.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html#more-about-ingredients">More about Ingredients</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html#using-extensions">Using Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html#advanced-features">Advanced Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="ovens.html">Ovens</a></li>
<li class="toctree-l1"><a class="reference internal" href="hooks.html">Hooks</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="oven_drivers.html">Custom Oven Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="dynamic_extensions.html">Dynamic Extensions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">Recipe</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#">Docs</a> &raquo;</li>
        
      <li>Recipe: A DRY framework for querying data</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="recipe-a-dry-framework-for-querying-data">
<h1>Recipe: A DRY framework for querying data<a class="headerlink" href="#recipe-a-dry-framework-for-querying-data" title="Permalink to this headline">¶</a></h1>
<p>Release v0.5.1. (<a class="reference internal" href="install.html#install"><span class="std std-ref">Installation</span></a>)</p>
<p>Recipe is an MIT licensed cross-database querying library, written
in Python. It allows you to reuse SQL fragments to answer data questions
consistently. Extension classes allow you to support data anonymization,
automatic generation of where clauses, user permissioning to data, subselects,
and response formatting.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">shelf</span> <span class="o">=</span> <span class="n">Shelf</span><span class="p">({</span> <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="n">WtdAvgMetric</span><span class="p">(</span><span class="n">Census</span><span class="o">.</span><span class="n">age</span><span class="p">,</span> <span class="n">Census</span><span class="o">.</span><span class="n">pop2000</span><span class="p">),</span> <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="n">Dimension</span><span class="p">(</span><span class="n">Census</span><span class="o">.</span><span class="n">state</span><span class="p">)})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">recipe</span> <span class="o">=</span> <span class="n">Recipe</span><span class="p">()</span><span class="o">.</span><span class="n">shelf</span><span class="p">(</span><span class="n">shelf</span><span class="p">)</span><span class="o">.</span><span class="n">metrics</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">dimensions</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s1">&#39;-age&#39;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">recipe</span><span class="o">.</span><span class="n">to_sql</span><span class="p">()</span>
<span class="go">SELECT census.state AS state,</span>
<span class="go">       CAST(sum(census.age * census.pop2000) AS FLOAT) / (coalesce(CAST(sum(census.pop2000) AS FLOAT), 0.0) + 1e-09) AS age</span>
<span class="go">FROM census</span>
<span class="go">GROUP BY census.state</span>
<span class="go">ORDER BY CAST(sum(census.age * census.pop2000) AS FLOAT) / (coalesce(CAST(sum(census.pop2000) AS FLOAT), 0.0) + 1e-09) DESC</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">recipe</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">csv</span>
<span class="go">state,age,state_id</span>
<span class="go">Florida,39.08283934000634,Florida</span>
<span class="go">West Virginia,38.555058651148165,West Virginia</span>
<span class="go">Maine,38.10118393261269,Maine</span>
<span class="go">Pennsylvania,38.03856695544053,Pennsylvania</span>
<span class="gp">...</span>
</pre></div>
</div>
<div class="section" id="user-s-guide">
<h2>User’s Guide<a class="headerlink" href="#user-s-guide" title="Permalink to this headline">¶</a></h2>
<p>This guide covers installation, the core concepts to get you started,
available extensions, connecting to databases and caching.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="intro.html#recipe-license">Recipe License</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#pythons-supported">Pythons Supported</a></li>
</ul>
</li>
</ul>
</div>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="install.html#installing-recipe">Installing Recipe</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#download-the-source">Download the Source</a></li>
</ul>
</li>
</ul>
</div>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#creating-a-shelf">Creating a Shelf</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#using-the-shelf-to-build-a-recipe">Using the Shelf to build a Recipe</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#viewing-the-data-from-your-recipe">Viewing the data from your Recipe</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html#more-about-ingredients">More about Ingredients</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#types-of-ingredients">Types of Ingredients</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorial.html#dimension">Dimension</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial.html#idvaluedimension">IdValueDimension</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial.html#lookupdimension">LookupDimension</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial.html#metric">Metric</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial.html#dividemetric">DivideMetric</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial.html#wtdavgmetric">WtdAvgMetric</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial.html#filter">Filter</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial.html#having">Having</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#formatters">Formatters</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#building-filters">Building filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#storing-extra-attributes-in-meta">Storing extra attributes in meta</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html#using-extensions">Using Extensions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#automatic-filtering">Automatic Filtering</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#summarizing-over-dimensions">Summarizing over Dimensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#merging-multiple-tables">Merging multiple tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#adding-comparison-data">Adding comparison data</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#anonymizing-data">Anonymizing data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html#advanced-features">Advanced Features</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#database-connections">Database connections</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#caching">Caching</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#running-recipes-in-parallel-with-recipepool">Running recipes in parallel with RecipePool</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ovens.html">Ovens</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ovens.html#initializing-an-oven">Initializing an Oven</a></li>
<li class="toctree-l2"><a class="reference internal" href="ovens.html#oven-drivers">Oven Drivers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="hooks.html">Hooks</a></li>
</ul>
</div>
</div>
<div class="section" id="api-reference">
<h2>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h2>
<p>If you are looking for information on a specific function, class or
method, this part of the documentation is for you.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api.html#recipe">Recipe</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#shelf">Shelf</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#ingredients">Ingredients</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#extensions">Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#exceptions">Exceptions</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="development">
<h2>Development<a class="headerlink" href="#development" title="Permalink to this headline">¶</a></h2>
<p>To add features, extensions or ingredients to Recipe see our development guide.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="development.html#conventions">Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="development.html#source-control">Source Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="development.html#adding-new-extensions">Adding New Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="development.html#adding-new-ingredients">Adding New Ingredients</a></li>
<li class="toctree-l2"><a class="reference internal" href="development.html#testing-recipe">Testing Recipe</a></li>
<li class="toctree-l2"><a class="reference internal" href="development.html#continuous-integration">Continuous Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="development.html#building-the-docs">Building the Docs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="oven_drivers.html">Custom Oven Drivers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="oven_drivers.html#ovenbase">OvenBase</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dynamic_extensions.html">Dynamic Extensions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="dynamic_extensions.html#dynamicextensionbase">DynamicExtensionBase</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="intro.html" class="btn btn-neutral float-right" title="Introduction" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Chris Gemignani.
      Last updated on Mar 22, 2019.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.5.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>