#!/usr/bin/env python
'''
Add a user to a tios database
'''
from __future__ import print_function
import argparse
import sys
try:
   from tios import admin
except RuntimeError as e:
    print('Error: ', e[0])
    exit(1)

import pymongo

parser = argparse.ArgumentParser(description='Add a user to the *tios* database')
parser.add_argument("username", help='username for new user')
parser.add_argument("password", help='password for new user')

args = parser.parse_args()
new_user_name = args.username
new_password = args.password

try:
    admin.add_user(new_user_name, new_password)
except pymongo.errors.DuplicateKeyError:
    print('Error: duplicate user name')
    exit(1)
