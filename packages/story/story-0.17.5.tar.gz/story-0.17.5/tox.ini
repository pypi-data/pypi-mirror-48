[tox]
envlist = py37,pep8


[testenv]
deps =
    pytest
    pytest-cov
    pytest-mock
    delegator-py


[testenv:py37]
passenv = STORYSCRIPT_INT_CONF_ACCESS_TOKEN STORYSCRIPT_INT_CONF_USER_ID
commands =
    pytest --cov=. --cov-config=.coveragerc --cov-report=term-missing {posargs}
    coverage xml


[testenv:pep8]
deps =
    flake8==3.5.0
    flake8-quotes==1.0.0
    flake8-import-order==0.18
    pep8-naming==0.7.0
commands =
    flake8 \
      --max-complexity=50 \
      --ignore F401,F403,I201,E722,W503 \
      --exclude=./build,./.eggs,venv,.venv,.tox,dist,setup.py,scripts,./story/helpers/datetime.py
