# Протокол датаграммной передачи crow.

crow является протоколом передачи сообщений, захватывающим 
уровни модели osi

## Концептуальное устройство.
В теринах протокола crow обмен сообщений осуществляется между сущностями, именуемыми башня (tower). Башни пересылают друг другу пакеты через сущности, именуемые вратами (gate).

Башни пересылают пакеты по цепочке гейтов от одного к другому, согласно маршруту указанному в адресном поле пакета.

По мере прохождения по маршруту, инкрементируется специальный байт пакета, указывающий, какую часть адреса надлежит читать следующей башне или вратам.
По мере прохождения по маршруту использованные части адреса перезаписываются батами кодирующими обратный маршрут, поскоьку в общем случае байтовое представление прямого пути не равно обратному. Этот механизм позволяет получателю корректно определить маршрут до отправителя, хотя сам отправитель в общем случае этого маршрута может и незнать (пример - использование udp broadcast).

Таким образом, отсутствие абсолютного адреса является особенностью протокола crow. Вместо этого нумеруются гейты, а каждый гейт на своём уровне также может использовать любой удобный ему формат адреса.

Маршрутизация пакета осуществляется на двух уровнях - уровень башни и уровень врат. На уровне башни 

## Устройство пакета crow.

Базовая структура пакета crow выглядит следующим образом:

- Заголовок
	- Поле флагов
	- Длина поле адресса
	- Полная длина пакета
	- Маршрутный курсор
	- Идентификатор пакета
	- Поле качества обслуживания
	- Квант времени обслуживания
- Поле аддреса
- Поле данных