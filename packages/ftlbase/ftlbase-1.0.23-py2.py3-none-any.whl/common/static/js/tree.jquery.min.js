(function e$jscomp$0(f,l,n){function d(a,e){if(!l[a]){if(!f[a]){var b="function"==typeof require&&require;if(!e&&b)return b(a,!0);if(c)return c(a,!0);b=Error("Cannot find module '"+a+"'");throw b.code="MODULE_NOT_FOUND",b;}b=l[a]={exports:{}};f[a][0].call(b.exports,function(b){var e=f[a][1][b];return d(e?e:b)},b,b.exports,e$jscomp$0,f,l,n)}return l[a].exports}for(var c="function"==typeof require&&require,a=0;a<n.length;a++)d(n[a]);return d})({1:[function(f,l,n){var k=function(a,b){function e(){this.constructor=
a}for(var c in b)d.call(b,c)&&(a[c]=b[c]);e.prototype=b.prototype;a.prototype=new e;a.__super__=b.prototype;return a},d={}.hasOwnProperty;n=f("./node");var c=f("./util");var a=n.Position;var b=jQuery;f=function(){function h(a){this.tree_widget=a;this.$ghost=this.hovered_area=null;this.hit_areas=[];this.is_dragging=!1;this.current_item=null}h.prototype.mouseCapture=function(a){a=b(a.target);if(!this.mustCaptureElement(a)||this.tree_widget.options.onIsMoveHandle&&!this.tree_widget.options.onIsMoveHandle(a))return null;
(a=this.tree_widget._getNodeElement(a))&&this.tree_widget.options.onCanMove&&(this.tree_widget.options.onCanMove(a.node)||(a=null));this.current_item=a;return null!==this.current_item};h.prototype.mouseStart=function(a){this.refresh();var e=b(a.target).offset();var h=this.current_item.node;h=this.tree_widget.options.autoEscape?c.html_escape(h.name):h.name;this.drag_element=new g(h,a.page_x-e.left,a.page_y-e.top,this.tree_widget.element);this.is_dragging=!0;this.current_item.$element.addClass("jqtree-moving");
return!0};h.prototype.mouseDrag=function(a){this.drag_element.move(a.page_x,a.page_y);var b=this.findHoveredArea(a.page_x,a.page_y);this.canMoveToArea(b)&&b?(b.node.isFolder()||this.stopOpenFolderTimer(),this.hovered_area!==b&&(this.hovered_area=b,this.mustOpenFolderTimer(b)?this.startOpenFolderTimer(b.node):this.stopOpenFolderTimer(),this.updateDropHint())):(this.removeHover(),this.removeDropHint(),this.stopOpenFolderTimer());if(!b&&null!=this.tree_widget.options.onDragMove)this.tree_widget.options.onDragMove(this.current_item.node,
a.original_event);return!0};h.prototype.mustCaptureElement=function(a){return!a.is("input,select,textarea")};h.prototype.canMoveToArea=function(b){if(b){if(this.tree_widget.options.onCanMoveTo){var e=a.getName(b.position);return this.tree_widget.options.onCanMoveTo(this.current_item.node,b.node,e)}return!0}return!1};h.prototype.mouseStop=function(a){var b;this.moveItem(a);this.clear();this.removeHover();this.removeDropHint();this.removeHitAreas();if(b=this.current_item)this.current_item.$element.removeClass("jqtree-moving"),
this.current_item=null;this.is_dragging=!1;if(!this.hovered_area&&b&&null!=this.tree_widget.options.onDragStop)this.tree_widget.options.onDragStop(b.node,a.original_event);return!1};h.prototype.refresh=function(){this.removeHitAreas();if(this.current_item&&(this.generateHitAreas(),this.current_item=this.tree_widget._getNodeElementForNode(this.current_item.node),this.is_dragging))return this.current_item.$element.addClass("jqtree-moving")};h.prototype.removeHitAreas=function(){return this.hit_areas=
[]};h.prototype.clear=function(){this.drag_element.remove();return this.drag_element=null};h.prototype.removeDropHint=function(){if(this.previous_ghost)return this.previous_ghost.remove()};h.prototype.removeHover=function(){return this.hovered_area=null};h.prototype.generateHitAreas=function(){return this.hit_areas=(new e(this.tree_widget.tree,this.current_item.node,this.getTreeDimensions().bottom)).generate()};h.prototype.findHoveredArea=function(a,b){var e;var c=this.getTreeDimensions();if(a<c.left||
b<c.top||a>c.right||b>c.bottom)return null;var h=0;for(e=this.hit_areas.length;h<e;){var g=h+e>>1;c=this.hit_areas[g];if(b<c.top)e=g;else if(b>c.bottom)h=g+1;else return c}return null};h.prototype.mustOpenFolderTimer=function(b){var e=b.node;return e.isFolder()&&!e.is_open&&b.position===a.INSIDE};h.prototype.updateDropHint=function(){if(this.hovered_area)return this.removeDropHint(),this.previous_ghost=this.tree_widget._getNodeElementForNode(this.hovered_area.node).addDropHint(this.hovered_area.position)};
h.prototype.startOpenFolderTimer=function(a){var b=function(b){return function(){return b.tree_widget._openNode(a,b.tree_widget.options.slide,function(){b.refresh();return b.updateDropHint()})}}(this);this.stopOpenFolderTimer();return this.open_folder_timer=setTimeout(b,this.tree_widget.options.openFolderDelay)};h.prototype.stopOpenFolderTimer=function(){if(this.open_folder_timer)return clearTimeout(this.open_folder_timer),this.open_folder_timer=null};h.prototype.moveItem=function(b){if(this.hovered_area&&
this.hovered_area.position!==a.NONE&&this.canMoveToArea(this.hovered_area)){var e=this.current_item.node;var c=this.hovered_area.node;var h=this.hovered_area.position;var g=e.parent;h===a.INSIDE&&(this.hovered_area.node.is_open=!0);var q=function(a){return function(){a.tree_widget.tree.moveNode(e,c,h);a.tree_widget.element.empty();return a.tree_widget._refreshElements()}}(this);b=this.tree_widget._triggerEvent("tree.move",{move_info:{moved_node:e,target_node:c,position:a.getName(h),previous_parent:g,
do_move:q,original_event:b.original_event}});if(!b.isDefaultPrevented())return q()}};h.prototype.getTreeDimensions=function(){var a=this.tree_widget.element.offset();return{left:a.left,top:a.top,right:a.left+this.tree_widget.element.width(),bottom:a.top+this.tree_widget.element.height()+16}};return h}();var e=function(e){function c(a,b,e){c.__super__.constructor.call(this,a);this.current_node=b;this.tree_bottom=e}k(c,e);c.prototype.generate=function(){this.positions=[];this.last_top=0;this.iterate();
return this.generateHitAreas(this.positions)};c.prototype.getTop=function(a){return a.offset().top};c.prototype.addPosition=function(a,b,e){this.positions.push({top:e,node:a,position:b});return this.last_top=e};c.prototype.handleNode=function(b,e,c){c=this.getTop(c);b===this.current_node?this.addPosition(b,a.NONE,c):this.addPosition(b,a.INSIDE,c);return e===this.current_node||b===this.current_node?this.addPosition(b,a.NONE,c):this.addPosition(b,a.AFTER,c)};c.prototype.handleOpenFolder=function(b,
e){if(b===this.current_node)return!1;b.children[0]!==this.current_node&&this.addPosition(b,a.INSIDE,this.getTop(e));return!0};c.prototype.handleClosedFolder=function(b,e,c){c=this.getTop(c);if(b===this.current_node)return this.addPosition(b,a.NONE,c);this.addPosition(b,a.INSIDE,c);if(e!==this.current_node)return this.addPosition(b,a.AFTER,c)};c.prototype.handleFirstNode=function(e,c){if(e!==this.current_node)return this.addPosition(e,a.BEFORE,this.getTop(b(e.element)))};c.prototype.handleAfterOpenFolder=
function(b,e,c){return b===this.current_node.node||e===this.current_node.node?this.addPosition(b,a.NONE,this.last_top):this.addPosition(b,a.AFTER,this.last_top)};c.prototype.generateHitAreas=function(a){var b;var e=-1;var c=[];var h=[];var g=0;for(b=a.length;g<b;g++){var d=a[g];d.top!==e&&c.length&&(c.length&&this.generateHitAreasForGroup(h,c,e,d.top),e=d.top,c=[]);c.push(d)}this.generateHitAreasForGroup(h,c,e,this.tree_bottom);return h};c.prototype.generateHitAreasForGroup=function(a,b,e,c){var h;
var g=Math.min(b.length,4);c=Math.round((c-e)/g);for(h=0;h<g;){var d=b[h];a.push({top:e,bottom:e+c,node:d.node,position:d.position});e+=c;h+=1}return null};return c}(function(){function a(a){this.tree=a}a.prototype.iterate=function(){var a=!0;var e=function(c){return function(g,h){var d;var q=(g.is_open||!g.element)&&g.hasChildren();if(g.element){var m=b(g.element);if(!m.is(":visible"))return;a&&(c.handleFirstNode(g,m),a=!1);g.hasChildren()?g.is_open?c.handleOpenFolder(g,m)||(q=!1):c.handleClosedFolder(g,
h,m):c.handleNode(g,h,m)}if(q){q=g.children.length;var t=g.children;var f=d=0;for(t=t.length;d<t;f=++d)f===q-1?e(g.children[f],null):e(g.children[f],g.children[f+1]);if(g.is_open)return c.handleAfterOpenFolder(g,h,m)}}}(this);return e(this.tree,null)};a.prototype.handleNode=function(a,b,e){};a.prototype.handleOpenFolder=function(a,b){};a.prototype.handleClosedFolder=function(a,b,e){};a.prototype.handleAfterOpenFolder=function(a,b,e){};a.prototype.handleFirstNode=function(a,b){};return a}());var g=
function(){function a(a,e,c,g){this.offset_x=e;this.offset_y=c;this.$element=b('<span class="jqtree-title jqtree-dragging">'+a+"</span>");this.$element.css("position","absolute");g.append(this.$element)}a.prototype.move=function(a,b){return this.$element.offset({left:a-this.offset_x,top:b-this.offset_y})};a.prototype.remove=function(){return this.$element.remove()};return a}();l.exports={DragAndDropHandler:f,DragElement:g,HitAreasGenerator:e}},{"./node":5,"./util":12}],2:[function(f,l,n){f("./node_element");
var k=f("./util");var d=k.html_escape;var c=jQuery;f=function(){function a(a){this.tree_widget=a;this.opened_icon_element=this.createButtonElement(a.options.openedIcon);this.closed_icon_element=this.createButtonElement(a.options.closedIcon)}a.prototype.render=function(a){return a&&a.parent?this.renderFromNode(a):this.renderFromRoot()};a.prototype.renderFromRoot=function(){var a=this.tree_widget.element;a.empty();return this.createDomElements(a[0],this.tree_widget.tree.children,!0,!0,1)};a.prototype.renderFromNode=
function(a){var b=c(a.element);var g=this.createLi(a,a.getLevel());this.attachNodeData(a,g);b.after(g);b.remove();if(a.children)return this.createDomElements(g,a.children,!1,!1,a.getLevel()+1)};a.prototype.createDomElements=function(a,e,c,h,d){var b;c=this.createUl(c);a.appendChild(c);h=0;for(b=e.length;h<b;h++){a=e[h];var g=this.createLi(a,d);c.appendChild(g);this.attachNodeData(a,g);a.hasChildren()&&this.createDomElements(g,a.children,!1,a.is_open,d+1)}return null};a.prototype.attachNodeData=function(a,
e){a.element=e;return c(e).data("node",a)};a.prototype.createUl=function(a){if(a){a="jqtree-tree";var b="tree";this.tree_widget.options.rtl&&(a+=" jqtree-rtl")}else a="",b="group";var c=document.createElement("ul");c.className="jqtree_common "+a;c.setAttribute("role",b);return c};a.prototype.createLi=function(a,e){var b=this.tree_widget.select_node_handler&&this.tree_widget.select_node_handler.isNodeSelected(a);b=a.isFolder()?this.createFolderLi(a,e,b):this.createNodeLi(a,e,b);if(this.tree_widget.options.onCreateLi)this.tree_widget.options.onCreateLi(a,
c(b));return b};a.prototype.createFolderLi=function(a,c,g){var b=this.getButtonClasses(a);var e=this.getFolderClasses(a,g);var d=a.is_open?this.opened_icon_element:this.closed_icon_element;var f=document.createElement("li");f.className="jqtree_common "+e;f.setAttribute("role","presentation");var k=document.createElement("div");k.className="jqtree-element jqtree_common";k.setAttribute("role","presentation");f.appendChild(k);e=document.createElement("a");e.className=b;e.appendChild(d.cloneNode(!1));
e.setAttribute("role","presentation");e.setAttribute("aria-hidden","true");this.tree_widget.options.buttonLeft&&k.appendChild(e);k.appendChild(this.createTitleSpan(a.name,c,g,a.is_open,!0));this.tree_widget.options.buttonLeft||k.appendChild(e);return f};a.prototype.createNodeLi=function(a,e,c){var b=["jqtree_common"];c&&b.push("jqtree-selected");var g=b.join(" ");b=document.createElement("li");b.className=g;b.setAttribute("role","presentation");g=document.createElement("div");g.className="jqtree-element jqtree_common";
g.setAttribute("role","presentation");b.appendChild(g);g.appendChild(this.createTitleSpan(a.name,e,c,a.is_open,!1));return b};a.prototype.createTitleSpan=function(a,c,g,h,d){var b=document.createElement("span");var e="jqtree-title jqtree_common";d&&(e+=" jqtree-title-folder");b.className=e;b.setAttribute("role","treeitem");b.setAttribute("aria-level",c);b.setAttribute("aria-selected",k.getBoolString(g));b.setAttribute("aria-expanded",k.getBoolString(h));g&&b.setAttribute("tabindex",0);b.innerHTML=
this.escapeIfNecessary(a);return b};a.prototype.getButtonClasses=function(a){var b=["jqtree-toggler","jqtree_common"];a.is_open||b.push("jqtree-closed");this.tree_widget.options.buttonLeft?b.push("jqtree-toggler-left"):b.push("jqtree-toggler-right");return b.join(" ")};a.prototype.getFolderClasses=function(a,c){var b=["jqtree-folder"];a.is_open||b.push("jqtree-closed");c&&b.push("jqtree-selected");a.is_loading&&b.push("jqtree-loading");return b.join(" ")};a.prototype.escapeIfNecessary=function(a){return this.tree_widget.options.autoEscape?
d(a):a};a.prototype.createButtonElement=function(a){if("string"===typeof a){var b=document.createElement("div");b.innerHTML=a;return document.createTextNode(b.innerHTML)}return c(a)[0]};return a}();l.exports=f},{"./node_element":6,"./util":12}],3:[function(f,l,n){var k=function(c,a){return function(){return c.apply(a,arguments)}};var d=jQuery;f=function(){function c(a){this.selectNode=k(this.selectNode,this);this.tree_widget=a;a.options.keyboardSupport&&d(document).bind("keydown.jqtree",d.proxy(this.handleKeyDown,
this))}c.prototype.deinit=function(){return d(document).unbind("keydown.jqtree")};c.prototype.moveDown=function(){var a;return(a=this.tree_widget.getSelectedNode())?this.selectNode(a.getNextNode()):!1};c.prototype.moveUp=function(){var a;return(a=this.tree_widget.getSelectedNode())?this.selectNode(a.getPreviousNode()):!1};c.prototype.moveRight=function(){var a;if((a=this.tree_widget.getSelectedNode())&&a.isFolder()){if(a.is_open)return this.selectNode(a.getNextNode());this.tree_widget.openNode(a);
return!1}return!0};c.prototype.moveLeft=function(){var a;return(a=this.tree_widget.getSelectedNode())?a.isFolder()&&a.is_open?(this.tree_widget.closeNode(a),!1):this.selectNode(a.getParent()):!0};c.prototype.handleKeyDown=function(a){if(!this.tree_widget.options.keyboardSupport||d(document.activeElement).is("textarea,input,select")||!this.tree_widget.getSelectedNode())return!0;switch(a.which){case 40:return this.moveDown();case 38:return this.moveUp();case 39:return this.moveRight();case 37:return this.moveLeft()}return!0};
c.prototype.selectNode=function(a){return a?(this.tree_widget.selectNode(a),this.tree_widget.scroll_handler&&!this.tree_widget.scroll_handler.isScrolledIntoView(d(a.element).find(".jqtree-element"))&&this.tree_widget.scrollToNode(a),!1):!0};return c}();l.exports=f},{}],4:[function(f,l,n){var k=function(a,b){function c(){this.constructor=a}for(var g in b)d.call(b,g)&&(a[g]=b[g]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a},d={}.hasOwnProperty;f=f("./simple.widget");var c=
jQuery;f=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}k(b,a);b.is_mouse_handled=!1;b.prototype._init=function(){this.$el.bind("mousedown.mousewidget",c.proxy(this._mouseDown,this));this.$el.bind("touchstart.mousewidget",c.proxy(this._touchStart,this));this.is_mouse_started=!1;this.mouse_delay=0;this._mouse_delay_timer=null;this._is_mouse_delay_met=!0;return this.mouse_down_info=null};b.prototype._deinit=function(){this.$el.unbind("mousedown.mousewidget");this.$el.unbind("touchstart.mousewidget");
var a=c(document);a.unbind("mousemove.mousewidget");return a.unbind("mouseup.mousewidget")};b.prototype._mouseDown=function(a){var b;if(1===a.which)return(b=this._handleMouseDown(a,this._getPositionInfo(a)))&&a.preventDefault(),b};b.prototype._handleMouseDown=function(a,c){if(!b.is_mouse_handled&&(this.is_mouse_started&&this._handleMouseUp(c),this.mouse_down_info=c,this._mouseCapture(c)))return this._handleStartMouse(),this.is_mouse_handled=!0};b.prototype._handleStartMouse=function(){var a=c(document);
a.bind("mousemove.mousewidget",c.proxy(this._mouseMove,this));a.bind("touchmove.mousewidget",c.proxy(this._touchMove,this));a.bind("mouseup.mousewidget",c.proxy(this._mouseUp,this));a.bind("touchend.mousewidget",c.proxy(this._touchEnd,this));if(this.mouse_delay)return this._startMouseDelayTimer()};b.prototype._startMouseDelayTimer=function(){this._mouse_delay_timer&&clearTimeout(this._mouse_delay_timer);this._mouse_delay_timer=setTimeout(function(a){return function(){return a._is_mouse_delay_met=
!0}}(this),this.mouse_delay);return this._is_mouse_delay_met=!1};b.prototype._mouseMove=function(a){return this._handleMouseMove(a,this._getPositionInfo(a))};b.prototype._handleMouseMove=function(a,b){if(this.is_mouse_started)return this._mouseDrag(b),a.preventDefault();if(this.mouse_delay&&!this._is_mouse_delay_met)return!0;(this.is_mouse_started=!1!==this._mouseStart(this.mouse_down_info))?this._mouseDrag(b):this._handleMouseUp(b);return!this.is_mouse_started};b.prototype._getPositionInfo=function(a){return{page_x:a.pageX,
page_y:a.pageY,target:a.target,original_event:a}};b.prototype._mouseUp=function(a){return this._handleMouseUp(this._getPositionInfo(a))};b.prototype._handleMouseUp=function(a){var b=c(document);b.unbind("mousemove.mousewidget");b.unbind("touchmove.mousewidget");b.unbind("mouseup.mousewidget");b.unbind("touchend.mousewidget");this.is_mouse_started&&(this.is_mouse_started=!1,this._mouseStop(a))};b.prototype._mouseCapture=function(a){return!0};b.prototype._mouseStart=function(a){return null};b.prototype._mouseDrag=
function(a){return null};b.prototype._mouseStop=function(a){return null};b.prototype.setMouseDelay=function(a){return this.mouse_delay=a};b.prototype._touchStart=function(a){if(!(1<a.originalEvent.touches.length))return this._handleMouseDown(a,this._getPositionInfo(a.originalEvent.changedTouches[0]))};b.prototype._touchMove=function(a){if(!(1<a.originalEvent.touches.length))return this._handleMouseMove(a,this._getPositionInfo(a.originalEvent.changedTouches[0]))};b.prototype._touchEnd=function(a){if(!(1<
a.originalEvent.touches.length))return this._handleMouseUp(this._getPositionInfo(a.originalEvent.changedTouches[0]))};return b}(f);l.exports=f},{"./simple.widget":10}],5:[function(f,l,n){var k=jQuery;var d={getName:function(c){return d.strings[c-1]},nameToIndex:function(c){var a,b;var e=a=1;for(b=d.strings.length;1<=b?a<=b:a>=b;e=1<=b?++a:--a)if(d.strings[e-1]===c)return e;return 0},BEFORE:1,AFTER:2,INSIDE:3,NONE:4,strings:["before","after","inside","none"]};f=function(){function c(a,b,e){null==b&&
(b=!1);null==e&&(e=c);this.name="";this.setData(a);this.children=[];this.parent=null;b&&(this.id_mapping={},this.tree=this,this.node_class=e)}c.prototype.setData=function(a){var b;var c=function(a){return function(b){if(null!==b)return a.name=b}}(this);if("object"!==typeof a)c(a);else for(b in a){var g=a[b];"label"===b?c(g):"children"!==b&&(this[b]=g)}return null};c.prototype.initFromData=function(a){var b=function(a){return function(b){a.setData(b);if(b.children)return c(b.children)}}(this);var c=
function(a){return function(b){var c;var e=0;for(c=b.length;e<c;e++){var g=b[e];var h=new a.tree.node_class("");h.initFromData(g);a.addChild(h)}return null}}(this);b(a);return null};c.prototype.loadFromData=function(a){var b;this.removeChildren();var c=0;for(b=a.length;c<b;c++){var g=a[c];var h=new this.tree.node_class(g);this.addChild(h);"object"===typeof g&&g.children&&h.loadFromData(g.children)}return null};c.prototype.addChild=function(a){this.children.push(a);return a._setParent(this)};c.prototype.addChildAtPosition=
function(a,b){this.children.splice(b,0,a);return a._setParent(this)};c.prototype._setParent=function(a){this.parent=a;this.tree=a.tree;return this.tree.addNodeToIndex(this)};c.prototype.removeChild=function(a){a.removeChildren();return this._removeChild(a)};c.prototype._removeChild=function(a){this.children.splice(this.getChildIndex(a),1);return this.tree.removeNodeFromIndex(a)};c.prototype.getChildIndex=function(a){return k.inArray(a,this.children)};c.prototype.hasChildren=function(){return 0!==
this.children.length};c.prototype.isFolder=function(){return this.hasChildren()||this.load_on_demand};c.prototype.iterate=function(a){var b=function(c,g){var e,d;if(c.children){var f=c.children;var m=0;for(e=f.length;m<e;m++){var k=f[m];(d=a(k,g))&&k.hasChildren()&&b(k,g+1)}return null}};b(this,0);return null};c.prototype.moveNode=function(a,b,c){if(!a.isParentOf(b)){a.parent._removeChild(a);if(c===d.AFTER)return b.parent.addChildAtPosition(a,b.parent.getChildIndex(b)+1);if(c===d.BEFORE)return b.parent.addChildAtPosition(a,
b.parent.getChildIndex(b));if(c===d.INSIDE)return b.addChildAtPosition(a,0)}};c.prototype.getData=function(a){null==a&&(a=!1);var b=function(a){var c,e;var d=[];var f=0;for(e=a.length;f<e;f++){var m=a[f];var k={};for(c in m){var l=m[c];"parent"!==c&&"children"!==c&&"element"!==c&&"tree"!==c&&Object.prototype.hasOwnProperty.call(m,c)&&(k[c]=l)}m.hasChildren()&&(k.children=b(m.children));d.push(k)}return d};return a?b([this]):b(this.children)};c.prototype.getNodeByName=function(a){return this.getNodeByCallback(function(b){return b.name===
a})};c.prototype.getNodeByCallback=function(a){var b=null;this.iterate(function(c){return a(c)?(b=c,!1):!0});return b};c.prototype.addAfter=function(a){if(this.parent){var b=new this.tree.node_class(a);var c=this.parent.getChildIndex(this);this.parent.addChildAtPosition(b,c+1);"object"===typeof a&&a.children&&a.children.length&&b.loadFromData(a.children);return b}return null};c.prototype.addBefore=function(a){if(this.parent){var b=new this.tree.node_class(a);var c=this.parent.getChildIndex(this);
this.parent.addChildAtPosition(b,c);"object"===typeof a&&a.children&&a.children.length&&b.loadFromData(a.children);return b}return null};c.prototype.addParent=function(a){var b;if(this.parent){var c=new this.tree.node_class(a);c._setParent(this.tree);var g=this.parent;var h=g.children;var d=0;for(b=h.length;d<b;d++)a=h[d],c.addChild(a);g.children=[];g.addChild(c);return c}return null};c.prototype.remove=function(){if(this.parent)return this.parent.removeChild(this),this.parent=null};c.prototype.append=
function(a){var b=new this.tree.node_class(a);this.addChild(b);"object"===typeof a&&a.children&&a.children.length&&b.loadFromData(a.children);return b};c.prototype.prepend=function(a){var b=new this.tree.node_class(a);this.addChildAtPosition(b,0);"object"===typeof a&&a.children&&a.children.length&&b.loadFromData(a.children);return b};c.prototype.isParentOf=function(a){for(a=a.parent;a;){if(a===this)return!0;a=a.parent}return!1};c.prototype.getLevel=function(){var a;var b=0;for(a=this;a.parent;)b+=
1,a=a.parent;return b};c.prototype.getNodeById=function(a){return this.id_mapping[a]};c.prototype.addNodeToIndex=function(a){if(null!=a.id)return this.id_mapping[a.id]=a};c.prototype.removeNodeFromIndex=function(a){if(null!=a.id)return delete this.id_mapping[a.id]};c.prototype.removeChildren=function(){this.iterate(function(a){return function(b){a.tree.removeNodeFromIndex(b);return!0}}(this));return this.children=[]};c.prototype.getPreviousSibling=function(){if(this.parent){var a=this.parent.getChildIndex(this)-
1;return 0<=a?this.parent.children[a]:null}return null};c.prototype.getNextSibling=function(){if(this.parent){var a=this.parent.getChildIndex(this)+1;return a<this.parent.children.length?this.parent.children[a]:null}return null};c.prototype.getNodesByProperty=function(a,b){return this.filter(function(c){return c[a]===b})};c.prototype.filter=function(a){var b=[];this.iterate(function(c){a(c)&&b.push(c);return!0});return b};c.prototype.getNextNode=function(a){null==a&&(a=!0);return a&&this.hasChildren()&&
this.is_open?this.children[0]:this.parent?(a=this.getNextSibling())?a:this.parent.getNextNode(!1):null};c.prototype.getPreviousNode=function(){var a;return this.parent?(a=this.getPreviousSibling())?a.hasChildren()&&a.is_open?a.getLastChild():a:this.getParent():null};c.prototype.getParent=function(){return this.parent?this.parent.parent?this.parent:null:null};c.prototype.getLastChild=function(){if(this.hasChildren()){var a=this.children[this.children.length-1];return a.hasChildren()&&a.is_open?a.getLastChild():
a}return null};return c}();l.exports={Node:f,Position:d}},{}],6:[function(f,l,n){var k=function(a,b){function c(){this.constructor=a}for(var e in b)d.call(b,e)&&(a[e]=b[e]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a},d={}.hasOwnProperty;var c=f("./node").Position;var a=jQuery;n=function(){function g(a,b){this.init(a,b)}g.prototype.init=function(b,c){this.node=b;this.tree_widget=c;b.element||(b.element=this.tree_widget.element);return this.$element=a(b.element)};g.prototype.getUl=
function(){return this.$element.children("ul:first")};g.prototype.getSpan=function(){return this.$element.children(".jqtree-element").find("span.jqtree-title")};g.prototype.getLi=function(){return this.$element};g.prototype.addDropHint=function(a){return a===c.INSIDE?new b(this.$element):new e(this.node,this.$element,a)};g.prototype.select=function(){var a=this.getLi();a.addClass("jqtree-selected");a.attr("aria-selected","true");return this.getSpan().attr("tabindex",0)};g.prototype.deselect=function(){var a=
this.getLi();a.removeClass("jqtree-selected");a.attr("aria-selected","false");return this.getSpan().attr("tabindex",-1)};return g}();f=function(a){function g(){return g.__super__.constructor.apply(this,arguments)}k(g,a);g.prototype.open=function(a,b){null==b&&(b=!0);if(!this.node.is_open){this.node.is_open=!0;var c=this.getButton();c.removeClass("jqtree-closed");c.html("");c.append(this.tree_widget.renderer.opened_icon_element.cloneNode(!1));c=function(b){return function(){b.getLi().removeClass("jqtree-closed");
b.getSpan().attr("aria-expanded","true");a&&a();return b.tree_widget._triggerEvent("tree.open",{node:b.node})}}(this);if(b)return this.getUl().slideDown("fast",c);this.getUl().show();return c()}};g.prototype.close=function(a){null==a&&(a=!0);if(this.node.is_open){this.node.is_open=!1;var b=this.getButton();b.addClass("jqtree-closed");b.html("");b.append(this.tree_widget.renderer.closed_icon_element.cloneNode(!1));b=function(a){return function(){a.getLi().addClass("jqtree-closed");a.getSpan().attr("aria-expanded",
"false");return a.tree_widget._triggerEvent("tree.close",{node:a.node})}}(this);if(a)return this.getUl().slideUp("fast",b);this.getUl().hide();return b()}};g.prototype.getButton=function(){return this.$element.children(".jqtree-element").find("a.jqtree-toggler")};g.prototype.addDropHint=function(a){return this.node.is_open||a!==c.INSIDE?new e(this.node,this.$element,a):new b(this.$element)};return g}(n);var b=function(){function b(b){var c=b.children(".jqtree-element");b=b.width()-4;this.$hint=a('<span class="jqtree-border"></span>');
c.append(this.$hint);this.$hint.css({width:b,height:c.outerHeight()-4})}b.prototype.remove=function(){return this.$hint.remove()};return b}();var e=function(){function b(b,e,g){this.$element=e;this.node=b;this.$ghost=a('<li class="jqtree_common jqtree-ghost"><span class="jqtree_common jqtree-circle"></span><span class="jqtree_common jqtree-line"></span></li>');g===c.AFTER?this.moveAfter():g===c.BEFORE?this.moveBefore():g===c.INSIDE&&(b.isFolder()&&b.is_open?this.moveInsideOpenFolder():this.moveInside())}
b.prototype.remove=function(){return this.$ghost.remove()};b.prototype.moveAfter=function(){return this.$element.after(this.$ghost)};b.prototype.moveBefore=function(){return this.$element.before(this.$ghost)};b.prototype.moveInsideOpenFolder=function(){return a(this.node.children[0].element).before(this.$ghost)};b.prototype.moveInside=function(){this.$element.after(this.$ghost);return this.$ghost.addClass("jqtree-inside")};return b}();l.exports={BorderDropHint:b,FolderElement:f,GhostDropHint:e,NodeElement:n}},
{"./node":5}],7:[function(f,l,n){var k=f("./util").isInt;var d=jQuery;f=function(){function c(a){this.tree_widget=a}c.prototype.saveState=function(){var a=JSON.stringify(this.getState());if(this.tree_widget.options.onSetStateFromStorage)return this.tree_widget.options.onSetStateFromStorage(a);if(this.supportsLocalStorage())return localStorage.setItem(this.getCookieName(),a);if(d.cookie)return d.cookie.raw=!0,d.cookie(this.getCookieName(),a,{path:"/"})};c.prototype.getStateFromStorage=function(){var a;
return(a=this._loadFromStorage())?this._parseState(a):null};c.prototype._parseState=function(a){(a=d.parseJSON(a))&&a.selected_node&&k(a.selected_node)&&(a.selected_node=[a.selected_node]);return a};c.prototype._loadFromStorage=function(){return this.tree_widget.options.onGetStateFromStorage?this.tree_widget.options.onGetStateFromStorage():this.supportsLocalStorage()?localStorage.getItem(this.getCookieName()):d.cookie?(d.cookie.raw=!0,d.cookie(this.getCookieName())):null};c.prototype.getState=function(){var a=
function(a){return function(){var b=[];a.tree_widget.tree.iterate(function(a){a.is_open&&a.id&&a.hasChildren()&&b.push(a.id);return!0});return b}}(this);var b=function(a){return function(){var b;var c=a.tree_widget.getSelectedNodes();var e=[];var d=0;for(b=c.length;d<b;d++){var f=c[d];e.push(f.id)}return e}}(this);return{open_nodes:a(),selected_node:b()}};c.prototype.setInitialState=function(a){if(a){var b=this._openInitialNodes(a.open_nodes);this._selectInitialNodes(a.selected_node);return b}return!1};
c.prototype._openInitialNodes=function(a){var b;var c=!1;var d=0;for(b=a.length;d<b;d++){var f=a[d];if(f=this.tree_widget.getNodeById(f))f.load_on_demand?c=!0:f.is_open=!0}return c};c.prototype._selectInitialNodes=function(a){var b,c;var d=c=0;for(b=a.length;d<b;d++){var f=a[d];if(f=this.tree_widget.getNodeById(f))c+=1,this.tree_widget.select_node_handler.addToSelection(f)}return 0!==c};c.prototype.setInitialStateOnDemand=function(a,b){return a?this._setInitialStateOnDemand(a.open_nodes,a.selected_node,
b):b()};c.prototype._setInitialStateOnDemand=function(a,b,c){var e=0;var d=function(d){return function(){var g,h;var k=[];var l=0;for(g=a.length;l<g;l++){var n=a[l];(h=d.tree_widget.getNodeById(n))?h.is_loading||(h.load_on_demand?f(h):d.tree_widget._openNode(h,!1)):k.push(n)}a=k;d._selectInitialNodes(b)&&d.tree_widget._refreshElements();if(0===e)return c()}}(this);var f=function(a){return function(b){e+=1;return a.tree_widget._openNode(b,!1,function(){--e;return d()})}}(this);return d()};c.prototype.getCookieName=
function(){return"string"===typeof this.tree_widget.options.saveState?this.tree_widget.options.saveState:"tree"};c.prototype.supportsLocalStorage=function(){var a=function(){if("undefined"===typeof localStorage||null===localStorage)return!1;try{sessionStorage.setItem("_storage_test",!0),sessionStorage.removeItem("_storage_test")}catch(b){return!1}return!0};null==this._supportsLocalStorage&&(this._supportsLocalStorage=a());return this._supportsLocalStorage};c.prototype.getNodeIdToBeSelected=function(){var a;
return(a=this.getStateFromStorage())&&a.selected_node?a.selected_node[0]:null};return c}();l.exports=f},{"./util":12}],8:[function(f,l,n){var k=jQuery;f=function(){function d(c){this.tree_widget=c;this.previous_top=-1;this.is_initialized=!1;this._initScrollParent()}d.prototype._initScrollParent=function(){var c=function(a){return function(){var b;var c=["overflow","overflow-y"];var d=function(a){var b,d;var e=0;for(b=c.length;e<b;e++){var g=c[e];if("auto"===(d=k.css(a,g))||"scroll"===d)return!0}return!1};
if(d(a.tree_widget.$el[0]))return a.tree_widget.$el;var f=a.tree_widget.$el.parents();var l=0;for(b=f.length;l<b;l++){var m=f[l];if(d(m))return k(m)}return null}}(this);var a=function(a){return function(){a.scroll_parent_top=0;return a.$scroll_parent=null}}(this);"fixed"===this.tree_widget.$el.css("position")&&a();(c=c())&&c.length&&"HTML"!==c[0].tagName?(this.$scroll_parent=c,this.scroll_parent_top=this.$scroll_parent.offset().top):a();return this.is_initialized=!0};d.prototype._ensureInit=function(){if(!this.is_initialized)return this._initScrollParent()};
d.prototype.checkScrolling=function(){var c;this._ensureInit();if((c=this.tree_widget.dnd_handler.hovered_area)&&c.top!==this.previous_top)return this.previous_top=c.top,this.$scroll_parent?this._handleScrollingWithScrollParent(c):this._handleScrollingWithDocument(c)};d.prototype._handleScrollingWithScrollParent=function(c){if(20>this.scroll_parent_top+this.$scroll_parent[0].offsetHeight-c.bottom)return this.$scroll_parent[0].scrollTop+=20,this.tree_widget.refreshHitAreas(),this.previous_top=-1;if(20>
c.top-this.scroll_parent_top)return this.$scroll_parent[0].scrollTop-=20,this.tree_widget.refreshHitAreas(),this.previous_top=-1};d.prototype._handleScrollingWithDocument=function(c){if(20>c.top-k(document).scrollTop())return k(document).scrollTop(k(document).scrollTop()-20);if(20>k(window).height()-(c.bottom-k(document).scrollTop()))return k(document).scrollTop(k(document).scrollTop()+20)};d.prototype.scrollTo=function(c){this._ensureInit();if(this.$scroll_parent)return this.$scroll_parent[0].scrollTop=
c;var a=this.tree_widget.$el.offset().top;return k(document).scrollTop(c+a)};d.prototype.isScrolledIntoView=function(c){this._ensureInit();c=k(c);if(this.$scroll_parent){var a=0;var b=this.$scroll_parent.height();var d=c.offset().top-this.scroll_parent_top}else a=k(window).scrollTop(),b=a+k(window).height(),d=c.offset().top;return d+c.height()<=b&&d>=a};return d}();l.exports=f},{}],9:[function(f,l,n){f=function(){function f(d){this.tree_widget=d;this.clear()}f.prototype.getSelectedNode=function(){var d=
this.getSelectedNodes();return d.length?d[0]:!1};f.prototype.getSelectedNodes=function(){var d,c;if(this.selected_single_node)return[this.selected_single_node];var a=[];for(d in this.selected_nodes)(c=this.tree_widget.getNodeById(d))&&a.push(c);return a};f.prototype.getSelectedNodesUnder=function(d){var c,a;if(this.selected_single_node)return d.isParentOf(this.selected_single_node)?[this.selected_single_node]:[];var b=[];for(c in this.selected_nodes)(a=this.tree_widget.getNodeById(c))&&d.isParentOf(a)&&
b.push(a);return b};f.prototype.isNodeSelected=function(d){return d?d.id?this.selected_nodes[d.id]?!0:!1:this.selected_single_node?this.selected_single_node.element===d.element:!1:!1};f.prototype.clear=function(){this.selected_nodes={};return this.selected_single_node=null};f.prototype.removeFromSelection=function(d,c){null==c&&(c=!1);if(d.id){if(delete this.selected_nodes[d.id],c)return d.iterate(function(a){return function(b){delete a.selected_nodes[d.id];return!0}}(this))}else if(this.selected_single_node&&
d.element===this.selected_single_node.element)return this.selected_single_node=null};f.prototype.addToSelection=function(d){return d.id?this.selected_nodes[d.id]=!0:this.selected_single_node=d};return f}();l.exports=f},{}],10:[function(f,l,n){var k=[].slice;var d=jQuery;f=function(){function c(a,b){this.$el=d(a);this.options=d.extend({},this.defaults,b)}c.prototype.defaults={};c.prototype.destroy=function(){return this._deinit()};c.prototype._init=function(){return null};c.prototype._deinit=function(){return null};
c.register=function(a,b){var e=function(){return"simple_widget_"+b};var g=function(a,b){var e;return(e=d.data(a,b))&&e instanceof c?e:null};var f=function(b,c){var f;var h=e();var k=0;for(f=b.length;k<f;k++){var l=b[k];var m=g(l,h);m||(m=new a(l,c),d.data(l,h)||d.data(l,h,m),m._init())}return b};var l=function(a){var b,c;var f=e();var h=[];var k=0;for(b=a.length;k<b;k++){var l=a[k];(c=g(l,f))&&c.destroy();h.push(d.removeData(l,f))}return h};var n=function(a,b,f){var g,h;var k=null;var l=0;for(g=a.length;l<
g;l++){var m=a[l];(m=d.data(m,e()))&&m instanceof c&&(h=m[b])&&"function"===typeof h&&(k=h.apply(m,f))}return k};return d.fn[b]=function(){var b=arguments[0];var c=2<=arguments.length?k.call(arguments,1):[];if(void 0===b||"object"===typeof b)return f(this,b);if("string"===typeof b&&"_"!==b[0])return"destroy"===b?l(this):"get_widget_class"===b?a:n(this,b,c)}};return c}();l.exports=f},{}],11:[function(f,l,n){var k=function(a,b){function c(){this.constructor=a}for(var e in b)d.call(b,e)&&(a[e]=b[e]);
c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a},d={}.hasOwnProperty;var c=f("./version");var a=f("./drag_and_drop_handler");var b=f("./elements_renderer");var e=f("./key_handler");n=f("./mouse.widget");var g=f("./save_state_handler");var h=f("./scroll_handler");var q=f("./select_node_handler");l=f("./simple.widget");var t=f("./node");var m=t.Node;var w=t.Position;var x=f("./util");f=f("./node_element");var y=f.BorderDropHint;var u=f.FolderElement;var z=f.GhostDropHint;
var A=f.NodeElement;var v=a.DragAndDropHandler;var C=a.DragElement;var D=a.HitAreasGenerator;var p=jQuery;f=function(a){function d(){return d.__super__.constructor.apply(this,arguments)}k(d,a);d.prototype.BorderDropHint=y;d.prototype.DragElement=C;d.prototype.DragAndDropHandler=v;d.prototype.ElementsRenderer=b;d.prototype.GhostDropHint=z;d.prototype.HitAreasGenerator=D;d.prototype.Node=m;d.prototype.SaveStateHandler=g;d.prototype.ScrollHandler=h;d.prototype.SelectNodeHandler=q;d.prototype.defaults=
{autoOpen:!1,saveState:!1,dragAndDrop:!1,selectable:!0,useContextMenu:!0,onCanSelectNode:null,onSetStateFromStorage:null,onGetStateFromStorage:null,onCreateLi:null,onIsMoveHandle:null,onCanMove:null,onCanMoveTo:null,onLoadFailed:null,autoEscape:!0,dataUrl:null,closedIcon:null,openedIcon:"&#x25bc;",slide:!0,nodeClass:m,dataFilter:null,keyboardSupport:!0,openFolderDelay:500,rtl:null,onDragMove:null,onDragStop:null,buttonLeft:!0,onLoading:null};d.prototype.toggle=function(a,b){null==b&&(b=null);null===
b&&(b=this.options.slide);a.is_open?this.closeNode(a,b):this.openNode(a,b);return this.element};d.prototype.getTree=function(){return this.tree};d.prototype.selectNode=function(a){this._selectNode(a,!1);return this.element};d.prototype._selectNode=function(a,b){null==b&&(b=!1);if(this.select_node_handler){var c=function(b){return function(){return b.options.onCanSelectNode?b.options.selectable&&b.options.onCanSelectNode(a):b.options.selectable}}(this);var d=function(b){return function(){var c;if((c=
a.parent)&&c.parent&&!c.is_open)return b.openNode(c,!1)}}(this);var r=function(a){return function(){if(a.options.saveState)return a.save_state_handler.saveState()}}(this);if(!a)this._deselectCurrentNode(),r();else if(c())return this.select_node_handler.isNodeSelected(a)?b&&(this._deselectCurrentNode(),this._triggerEvent("tree.select",{node:null,previous_node:a})):(c=this.getSelectedNode(),this._deselectCurrentNode(),this.addToSelection(a),this._triggerEvent("tree.select",{node:a,deselected_node:c}),
d()),r()}};d.prototype.getSelectedNode=function(){return this.select_node_handler?this.select_node_handler.getSelectedNode():null};d.prototype.toJson=function(){return JSON.stringify(this.tree.getData())};d.prototype.loadData=function(a,b){this._loadData(a,b);return this.element};d.prototype.loadDataFromUrl=function(a,b,c){"string"===p.type(a)?this._loadDataFromUrl(a,b,c):this._loadDataFromUrl(null,a,b);return this.element};d.prototype.reload=function(a){this._loadDataFromUrl(null,null,a);return this.element};
d.prototype._loadDataFromUrl=function(a,b,c){var d=null;var r=function(a){return function(){d=b?p(b.element):a.element;d.addClass("jqtree-loading");return a._notifyLoading(!0,b,d)}}(this);var e=function(a){return function(){if(d)return d.removeClass("jqtree-loading"),a._notifyLoading(!1,b,d)}}(this);var f=function(){if("string"===p.type(a))return{url:a};a.method||(a.method="get");return a};var g=function(a){return function(d){e();a._loadData(d,b);if(c&&p.isFunction(c))return c()}}(this);var B=function(a){return function(b){var c=
p.isArray(b)||"object"===typeof b?b:null!=c?p.parseJSON(b):[];a.options.dataFilter&&(c=a.options.dataFilter(c));return g(c)}}(this);var h=function(a){return function(b){e();if(a.options.onLoadFailed)return a.options.onLoadFailed(b)}}(this);var k=function(){a=f();return p.ajax(p.extend({},a,{method:null!=a.method?a.method.toUpperCase():"GET",cache:!1,dataType:"json",success:B,error:h}))};a||(a=this._getDataUrlInfo(b));r();a?p.isArray(a)?g(a):k():e()};d.prototype._loadData=function(a,b){null==b&&(b=
null);var c=function(a){return function(){var c;if(a.select_node_handler){var d=a.select_node_handler.getSelectedNodesUnder(b);var r=0;for(c=d.length;r<c;r++){var e=d[r];a.select_node_handler.removeFromSelection(e)}}return null}}(this);var d=function(c){return function(){b.loadFromData(a);b.load_on_demand=!1;b.is_loading=!1;return c._refreshElements(b)}}(this);if(a&&(this._triggerEvent("tree.load_data",{tree_data:a}),b?(c(),d()):this._initTree(a),this.isDragging()))return this.dnd_handler.refresh()};
d.prototype.getNodeById=function(a){return this.tree.getNodeById(a)};d.prototype.getNodeByName=function(a){return this.tree.getNodeByName(a)};d.prototype.getNodesByProperty=function(a,b){return this.tree.getNodesByProperty(a,b)};d.prototype.getNodeByHtmlElement=function(a){return this._getNode(p(a))};d.prototype.getNodeByCallback=function(a){return this.tree.getNodeByCallback(a)};d.prototype.openNode=function(a,b){null==b&&(b=null);a&&(null===b&&(b=this.options.slide),this._openNode(a,b));return this.element};
d.prototype._openNode=function(a,b,c){var d;null==b&&(b=!0);var e=function(a){return function(b,c,d){return(new u(b,a)).open(d,c)}}(this);if(a.isFolder()){if(a.load_on_demand)return this._loadFolderOnDemand(a,b,c);for(d=a.parent;d;)d.parent&&e(d,!1,null),d=d.parent;e(a,b,c);return this._saveState()}};d.prototype._loadFolderOnDemand=function(a,b,c){null==b&&(b=!0);a.is_loading=!0;return this._loadDataFromUrl(null,a,function(d){return function(){return d._openNode(a,b,c)}}(this))};d.prototype.closeNode=
function(a,b){null==b&&(b=null);null===b&&(b=this.options.slide);a.isFolder()&&((new u(a,this)).close(b),this._saveState());return this.element};d.prototype.isDragging=function(){return this.dnd_handler?this.dnd_handler.is_dragging:!1};d.prototype.refreshHitAreas=function(){this.dnd_handler.refresh();return this.element};d.prototype.addNodeAfter=function(a,b){var c=b.addAfter(a);this._refreshElements(b.parent);return c};d.prototype.addNodeBefore=function(a,b){var c=b.addBefore(a);this._refreshElements(b.parent);
return c};d.prototype.addParentNode=function(a,b){var c=b.addParent(a);this._refreshElements(c.parent);return c};d.prototype.removeNode=function(a){var b;if(b=a.parent)this.select_node_handler.removeFromSelection(a,!0),a.remove(),this._refreshElements(b);return this.element};d.prototype.appendNode=function(a,b){b=b||this.tree;var c=b.append(a);this._refreshElements(b);return c};d.prototype.prependNode=function(a,b){b||(b=this.tree);var c=b.prepend(a);this._refreshElements(b);return c};d.prototype.updateNode=
function(a,b){var c;(c=b.id&&b.id!==a.id)&&this.tree.removeNodeFromIndex(a);a.setData(b);c&&this.tree.addNodeToIndex(a);"object"===typeof b&&b.children&&(a.removeChildren(),b.children.length&&a.loadFromData(b.children));this.renderer.renderFromNode(a);this._selectCurrentNode();return this.element};d.prototype.moveNode=function(a,b,c){c=w.nameToIndex(c);this.tree.moveNode(a,b,c);this._refreshElements();return this.element};d.prototype.getStateFromStorage=function(){return this.save_state_handler.getStateFromStorage()};
d.prototype.addToSelection=function(a){a&&(this.select_node_handler.addToSelection(a),this._getNodeElementForNode(a).select(),this._saveState());return this.element};d.prototype.getSelectedNodes=function(){return this.select_node_handler.getSelectedNodes()};d.prototype.isNodeSelected=function(a){return this.select_node_handler.isNodeSelected(a)};d.prototype.removeFromSelection=function(a){this.select_node_handler.removeFromSelection(a);this._getNodeElementForNode(a).deselect();this._saveState();return this.element};
d.prototype.scrollToNode=function(a){a=p(a.element).offset().top-this.$el.offset().top;this.scroll_handler.scrollTo(a);return this.element};d.prototype.getState=function(){return this.save_state_handler.getState()};d.prototype.setState=function(a){this.save_state_handler.setInitialState(a);this._refreshElements();return this.element};d.prototype.setOption=function(a,b){this.options[a]=b;return this.element};d.prototype.moveDown=function(){this.key_handler&&this.key_handler.moveDown();return this.element};
d.prototype.moveUp=function(){this.key_handler&&this.key_handler.moveUp();return this.element};d.prototype.getVersion=function(){return c};d.prototype._init=function(){d.__super__._init.call(this);this.element=this.$el;this.mouse_delay=300;this.is_initialized=!1;this.options.rtl=this._getRtlOption();this.options.closedIcon||(this.options.closedIcon=this._getDefaultClosedIcon());this.renderer=new b(this);null!=g?this.save_state_handler=new g(this):this.options.saveState=!1;null!=q&&(this.select_node_handler=
new q(this));null!=v?this.dnd_handler=new v(this):this.options.dragAndDrop=!1;null!=h&&(this.scroll_handler=new h(this));null!=e&&null!=q&&(this.key_handler=new e(this));this._initData();this.element.click(p.proxy(this._click,this));this.element.dblclick(p.proxy(this._dblclick,this));if(this.options.useContextMenu)return this.element.bind("contextmenu",p.proxy(this._contextmenu,this))};d.prototype._deinit=function(){this.element.empty();this.element.unbind();this.key_handler&&this.key_handler.deinit();
this.tree=null;return d.__super__._deinit.call(this)};d.prototype._initData=function(){return this.options.data?this._loadData(this.options.data):this._getDataUrlInfo()?this._loadDataFromUrl():this._loadData([])};d.prototype._getDataUrlInfo=function(a){var b=this.options.dataUrl||this.element.data("url");var c=function(c){return function(){var d={url:b};if(a&&a.id){var e={node:a.id};d.data=e}else if(e=c._getNodeIdToBeSelected())e={selected_node:e},d.data=e;return d}}(this);return p.isFunction(b)?
b(a):"string"===p.type(b)?c():b};d.prototype._getNodeIdToBeSelected=function(){return this.options.saveState?this.save_state_handler.getNodeIdToBeSelected():null};d.prototype._initTree=function(a){var b=function(a){return function(){if(!a.is_initialized)return a.is_initialized=!0,a._triggerEvent("tree.init")}}(this);this.tree=new this.options.nodeClass(null,!0,this.options.nodeClass);this.select_node_handler&&this.select_node_handler.clear();this.tree.loadFromData(a);a=this._setInitialState();this._refreshElements();
return a?this._setInitialStateOnDemand(b):b()};d.prototype._setInitialState=function(){var a=function(a){return function(){var b;return a.options.saveState&&a.save_state_handler&&(b=a.save_state_handler.getStateFromStorage())?(b=a.save_state_handler.setInitialState(b),[!0,b]):[!1,!1]}}(this);var b=function(a){return function(){if(!1===a.options.autoOpen)return!1;var b=a._getAutoOpenMaxLevel();var c=!1;a.tree.iterate(function(a,d){return a.load_on_demand?(c=!0,!1):a.hasChildren()?(a.is_open=!0,d!==
b):!1});return c}}(this);var c=a();a=c[0];c=c[1];a||(c=b());return c};d.prototype._setInitialStateOnDemand=function(a){var b=function(b){return function(){var c;return b.options.saveState&&b.save_state_handler&&(c=b.save_state_handler.getStateFromStorage())?(b.save_state_handler.setInitialStateOnDemand(c,a),!0):!1}}(this);var c=function(b){return function(){var c=b._getAutoOpenMaxLevel();var d=0;var e=function(a){d+=1;return b._openNode(a,!1,function(){--d;return f()})};var f=function(){b.tree.iterate(function(a,
d){if(a.load_on_demand)return a.is_loading||e(a),!1;b._openNode(a,!1);return d!==c});if(0===d)return a()};return f()}}(this);if(!b())return c()};d.prototype._getAutoOpenMaxLevel=function(){return!0===this.options.autoOpen?-1:parseInt(this.options.autoOpen)};d.prototype._refreshElements=function(a){null==a&&(a=null);this.renderer.render(a);return this._triggerEvent("tree.refresh")};d.prototype._click=function(a){var b;if(b=this._getClickTarget(a.target)){if("button"===b.type)return this.toggle(b.node,
this.options.slide),a.preventDefault(),a.stopPropagation();if("label"===b.type&&(b=b.node,a=this._triggerEvent("tree.click",{node:b,click_event:a}),!a.isDefaultPrevented()))return this._selectNode(b,!0)}};d.prototype._dblclick=function(a){var b;if((b=this._getClickTarget(a.target))&&"label"===b.type)return this._triggerEvent("tree.dblclick",{node:b.node,click_event:a})};d.prototype._getClickTarget=function(a){var b=p(a);a=b.closest(".jqtree-toggler");if(a.length){if(a=this._getNode(a))return{type:"button",
node:a}}else if(a=b.closest(".jqtree-element"),a.length&&(a=this._getNode(a)))return{type:"label",node:a};return null};d.prototype._getNode=function(a){a=a.closest("li.jqtree_common");return 0===a.length?null:a.data("node")};d.prototype._getNodeElementForNode=function(a){return a.isFolder()?new u(a,this):new A(a,this)};d.prototype._getNodeElement=function(a){return(a=this._getNode(a))?this._getNodeElementForNode(a):null};d.prototype._contextmenu=function(a){var b=p(a.target).closest("ul.jqtree-tree .jqtree-element");
if(b.length&&(b=this._getNode(b)))return a.preventDefault(),a.stopPropagation(),this._triggerEvent("tree.contextmenu",{node:b,click_event:a}),!1};d.prototype._saveState=function(){if(this.options.saveState)return this.save_state_handler.saveState()};d.prototype._mouseCapture=function(a){return this.options.dragAndDrop?this.dnd_handler.mouseCapture(a):!1};d.prototype._mouseStart=function(a){return this.options.dragAndDrop?this.dnd_handler.mouseStart(a):!1};d.prototype._mouseDrag=function(a){return this.options.dragAndDrop?
(a=this.dnd_handler.mouseDrag(a),this.scroll_handler&&this.scroll_handler.checkScrolling(),a):!1};d.prototype._mouseStop=function(a){return this.options.dragAndDrop?this.dnd_handler.mouseStop(a):!1};d.prototype._triggerEvent=function(a,b){var c=p.Event(a);p.extend(c,b);this.element.trigger(c);return c};d.prototype.testGenerateHitAreas=function(a){this.dnd_handler.current_item=this._getNodeElementForNode(a);this.dnd_handler.generateHitAreas();return this.dnd_handler.hit_areas};d.prototype._selectCurrentNode=
function(){var a;if(a=this.getSelectedNode())if(a=this._getNodeElementForNode(a))return a.select()};d.prototype._deselectCurrentNode=function(){var a;if(a=this.getSelectedNode())return this.removeFromSelection(a)};d.prototype._getDefaultClosedIcon=function(){return this.options.rtl?"&#x25c0;":"&#x25ba;"};d.prototype._getRtlOption=function(){if(null!==this.options.rtl)return this.options.rtl;var a=this.element.data("rtl");return null!=a&&!1!==a?!0:!1};d.prototype._notifyLoading=function(a,b,c){if(this.options.onLoading)return this.options.onLoading(a,
b,c)};return d}(n);f.getModule=function(b){return{node:t,util:x,drag_and_drop_handler:a}[b]};l.register(f,"tree")},{"./drag_and_drop_handler":1,"./elements_renderer":2,"./key_handler":3,"./mouse.widget":4,"./node":5,"./node_element":6,"./save_state_handler":7,"./scroll_handler":8,"./select_node_handler":9,"./simple.widget":10,"./util":12,"./version":13}],12:[function(f,l,n){var k=function(d,c){var a,b;var e=a=0;for(b=d.length;a<b;e=++a){var f=d[e];if(f===c)return e}return-1};l.exports={_indexOf:k,
getBoolString:function(d){return d?"true":"false"},html_escape:function(d){return(""+d).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},indexOf:function(d,c){return d.indexOf?d.indexOf(c):k(d,c)},isInt:function(d){return"number"===typeof d&&0===d%1}}},{}],13:[function(f,l,n){l.exports="1.3.6"},{}]},{},[11]);