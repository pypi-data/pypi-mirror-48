</html>
<!DOCTYPE HTML>

<html>

<head>
</head>

<body>
    <svg version="1.1" viewBox="0 0 95 95" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
        <defs>
            <linearGradient id="linearGradient836" x1="49.274" x2="83.199" y1="52.055" y2="116.23" gradientUnits="userSpaceOnUse" xlink:href="#linearGradient842-1-9-6"/>
            <linearGradient xmlns="http://www.w3.org/2000/svg" id="linearGradient837" x1="49.274" x2="83.199" y1="52.055" y2="116.23" gradientUnits="userSpaceOnUse">
                <stop stop-color="#FF5099" offset="0"/>
                <stop stop-color="#FF0000" offset="1"/>
            </linearGradient>
            <linearGradient id="linearGradient842-1-9-6">
                <stop stop-color="#1de099" offset="0"/>
                <stop stop-color="#1dc300" offset="1"/>
            </linearGradient>
            <linearGradient id="linearGradient870-3" x1="102.25" x2="26.269" y1="38.147" y2="86.124" gradientUnits="userSpaceOnUse">
                <stop stop-color="#fff" stop-opacity=".47596" offset="0"/>
                <stop stop-color="#fff" stop-opacity="0" offset="1"/>
            </linearGradient>
            <linearGradient id="linearGradient1036" x1="-38.436" x2="1.2805" y1="-7.9738" y2="-48.495" gradientTransform="matrix(1.25 0 0 -1.25 79.529 23.242)" gradientUnits="userSpaceOnUse" xlink:href="#linearGradient842-1-9-6"/>
            <linearGradient id="linearGradient1038" x1="-35.46" x2="-22.7" y1="144.25" y2="-16.705" gradientTransform="matrix(1.25 0 0 1.25 78.9 15.894)" gradientUnits="userSpaceOnUse">
                <stop stop-color="#fff" offset="0"/>
                <stop stop-color="#fff" stop-opacity="0" offset="1"/>
            </linearGradient>
            <filter id="filter917" color-interpolation-filters="sRGB">
                <feFlood flood-color="rgb(0,0,0)" flood-opacity=".49804" result="flood"/>
                <feComposite in="flood" in2="SourceGraphic" operator="in" result="composite1"/>
                <feGaussianBlur in="composite1" result="blur" stdDeviation="0.5"/>
                <feOffset dx="0" dy="0" result="offset"/>
                <feComposite in="SourceGraphic" in2="offset" result="composite2"/>
            </filter>
            <filter id="filter937" color-interpolation-filters="sRGB">
                <feFlood flood-color="rgb(0,0,0)" flood-opacity=".49804" result="flood"/>
                <feComposite in="flood" in2="SourceGraphic" operator="in" result="composite1"/>
                <feGaussianBlur in="composite1" result="blur" stdDeviation="0.5"/>
                <feOffset dx="0" dy="0" result="offset"/>
                <feComposite in="SourceGraphic" in2="offset" result="composite2"/>
            </filter>
        </defs>
        <g transform="translate(-.053721)">
            <path d="m10.459 3.698h68.573c4.0986 0 7.3981 3.2996 7.3981 7.3981v72.821c0 4.0986-3.2996 7.3981-7.3981 7.3981h-68.573c-4.0986 0-7.3981-3.2996-7.3981-7.3981v-72.821c0-4.0986 3.2996-7.3981 7.3981-7.3981z"/>
            <path id="logo" d="m79.529 23.242c-0.3975 1.09-1.4412 1.7725-2.5462 1.6475-0.0725-0.0063-0.4375-0.09375-0.52625-0.12625-0.14375-0.0525-0.27625-0.12-0.40375-0.195l-18.626 19.479-2.2 2.2988c0.2125 0.44 0.2925 0.93 0.22625 1.405-0.06 0.50125-0.27125 0.98625-0.64625 1.38-0.93 0.97125-2.4712 1.0062-3.445 0.07375-0.97375-0.93-1.0038-2.4725-0.075-3.445 0.7975-0.835 2.0038-1.0612 2.9575-0.49375l2.1962-2.25 18.605-19.46c-0.31875-0.595-0.40375-1.3112-0.155-1.9962 0.4675-1.2825 1.8825-1.9462 3.165-1.4788 0.02 0.0062 0.03625 0.01875 0.05625 0.02625 1.2388 0.48875 1.8762 1.8762 1.4175 3.135m-9 51.825c-0.15625 0.14875-0.3575 0.22375-0.5575 0.22375-0.215 0-0.43-0.085-0.59-0.25375l-24.809-26.178-24.81 26.178c-0.15875 0.16875-0.37375 0.25375-0.58875 0.25375-0.20125 0-0.40125-0.075-0.55875-0.22375-0.32625-0.3075-0.33875-0.8225-0.03-1.1475l24.869-26.241-24.869-26.239c-0.30875-0.325-0.295-0.83875 0.03125-1.1475 0.32375-0.31 0.83625-0.2975 1.1475 0.03125l24.809 26.175 24.808-26.175c0.31-0.32875 0.82375-0.34125 1.1488-0.03125 0.32625 0.30875 0.34 0.8225 0.03 1.1475l-24.868 26.239 24.869 26.241c0.30875 0.325 0.295 0.84-0.03125 1.1475m-55.795-3.1738c0.0013 0.0125 5e-3 0.02625 0.0062 0.04125 0.01125 0.13875 0.0025 0.28125-0.01125 0.4225-0.0025 0.03 0 0.06-5e-3 0.09-0.02125 0.16875-0.0625 0.3375-0.1225 0.50375-0.4675 1.2812-1.8838 1.945-3.165 1.4788-1.28-0.46625-1.94-1.8838-1.475-3.1625 0.18875-0.515 0.535-0.92375 0.96-1.2075 0.14625-0.09625 0.305-0.17625 0.46875-0.24 0.02625-0.01 0.0525-0.01875 0.07875-0.02875 0.14-0.04875 0.2825-0.08375 0.42875-0.10875 0.0425-0.0063 0.085-0.01375 0.12875-0.0175 0.135-0.01625 0.2725-0.015 0.41-0.0075 0.04875 0.0037 0.0975 0.0012 0.145 0.0075 0.18125 0.02125 0.3175 0.06125 0.4975 0.125 0.125 0.04625 0.26125 0.135 0.375 0.1975l18.386-19.226 2.185-2.2838c-0.43875-0.88-0.28125-1.9212 0.4375-2.6712 0.91375-0.955 2.43-0.98875 3.3862-0.0725 0.9575 0.915 0.9875 2.4312 0.07375 3.3862-0.78 0.8175-1.9412 1.0062-2.8775 0.45625l-2.145 2.2438-18.401 19.244c0.1225 0.26125 0.2075 0.53875 0.235 0.83m63.831-53.219c-0.15125-0.055-0.3025-0.08-0.45375-0.115v-1.64c0-2.4038-1.95-4.355-4.355-4.355h-58.485c-2.405 0-4.3525 1.9512-4.3525 4.355v51.612c-1.0388 0.3825-1.9138 1.1862-2.3225 2.3075-0.73375 2.0225 0.30625 4.2588 2.33 4.9962 0.425 0.15375 0.85875 0.21375 1.2875 0.2175 0.61625 0.85 4.295 5.9225 4.7125 6.3438 0.4575 0.46 1.3475 0.7075 2.3938 0.715h54.436c2.405 0 4.355-1.9512 4.355-4.3538v-52.632c1.24-0.2875 2.315-1.17 2.7825-2.4562 0.735-2.0225-0.30625-4.2575-2.3288-4.995" fill="url(#linearGradient1036)" stroke-width="1.25"/>
            <path d="m10.459 3.6973c-4.0986 0-7.3984 3.2999-7.3984 7.3984v35.742a69.213 31.539 0 0 0 44.916 7.5566 69.213 31.539 0 0 0 38.453-5.3438v-37.955c0-4.0986-3.2979-7.3984-7.3965-7.3984z" fill="url(#linearGradient1038)"/>
        </g>
        <g opacity=".815">
            <g transform="translate(-153.21 -54.749)">
                <g transform="matrix(1.2793 0 0 1.0415 -19.845 10.481)" stroke-width="0">
                    <rect x="17.615" y="57.18" width="76.453" height="30.306" ry="8.0224" fill="url(#linearGradient836)" opacity="1"/>
                    <path d="m94.068 69.912v-4.7109c0-1.1111-0.22403-2.1665-0.62891-3.127-0.40488-0.96043-0.99178-1.8258-1.7168-2.5508-0.72502-0.72502-1.5884-1.31-2.5488-1.7148s-2.0178-0.62891-3.1289-0.62891h-60.408c-1.1111 0-2.1685 0.22403-3.1289 0.62891-0.96043 0.40488-1.8238 0.98982-2.5488 1.7148-0.72502 0.72502-1.3119 1.5904-1.7168 2.5508-0.40488 0.96043-0.62695 2.0159-0.62695 3.127v4.9629a67.246 13.449 0 0 0 37.361 2.2754 67.246 13.449 0 0 0 39.092-2.5273z" fill="url(#linearGradient870-3)" opacity="1"/>
                </g>
            </g>
        </g>
        <g font-family="fan" letter-spacing="0px" word-spacing="0px"><text x="44.938061" y="34.630257" fill="#000000" filter="url(#filter917)" font-size="31.812px" stroke-width=".7953" text-align="center" text-anchor="middle" style="line-height:1.25" xml:space="preserve"><tspan x="44.938061" y="34.630257" fill="#ffffff" font-family="'Noto Sans'" font-size="20.317px" stroke-width=".7953" text-align="center" text-anchor="middle" id="space">Enable</tspan></text>
            <text x="43.897182" y="74.640846" fill="#ffffff" filter="url(#filter937)" font-size="40px" style="line-height:1.25" xml:space="preserve"><tspan x="43.897182" y="74.640846" fill="#ffffff" font-family="'Noto Sans'" text-align="center" text-anchor="middle" id="members">JS</tspan></text>
</g></svg>
    <script type="text/javascript">
     var space = document.getElementById('space');
     var members = document.getElementById('members');
     var logo = document.getElementById('logo');
     var offlineColor = '#FFBF00';
     var closedColor = 'url(#linearGradient837)';
     var openColor = 'url(#linearGradient1036)';

     function updateWidget(info) {
         // https://coolors.co/1d4d99-fffffa-0d5c63-44a1a0-78cdd7
         var color = offlineColor;
         var spaceText = 'Offline';
         var membersText = '?'
         var count = info['{{ topic }}'];

         if (count > 0) {
             color = openColor;
             spaceText = 'Open';
             membersText = count;
         } else if (count === "0") {
             color = closedColor;
             spaceText = 'Closed';
             membersText = count;
         }

         members.innerHTML = membersText;
         status.style = `background-color: ${color}`;
         space.innerHTML = spaceText;
         logo.style = `fill: ${color}`;
     }

     updateWidget({});
     var ws = new WebSocket("ws://{{ host }}/status");
     ws.onmessage = (evt) => {
         data = JSON.parse(evt.data);
         console.log(data);
         updateWidget(data);
     };
     ws.onclose = () => {
         console.log('closed');
     };
    </script>
</body>

</html>
